"use strict";
"use client";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = SettingsSidebar;
const jsx_runtime_1 = require("react/jsx-runtime");
function SettingsSidebar({ deepSearch, onToggleDeep, sandboxEnabled, onToggleSandbox, sandboxMode, onChangeSandboxMode, safeMode, onToggleSafeMode, reviewGate, onToggleReviewGate, workerEnabled, onToggleWorker, maskingEnabled, onToggleMasking, ragReady, onToggleRagReady, apiEnabled, onToggleApi, billingCap, onChangeBillingCap, tokenCap, onChangeTokenCap, temperatureCap, onChangeTemperatureCap, sessions, onResumeSession, sessionsLoading, }) {
    const riskBadge = (risk) => {
        if (risk === "alto")
            return "text-rose-200 bg-rose-500/20 border-rose-400/40";
        if (risk === "medio")
            return "text-amber-200 bg-amber-500/15 border-amber-400/30";
        return "text-emerald-200 bg-emerald-500/15 border-emerald-400/30";
    };
    return ((0, jsx_runtime_1.jsxs)("aside", { className: "glass rounded-2xl p-4 flex flex-col gap-4 h-full", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("p", { className: "text-sm font-semibold text-slate-100", children: "Configura\u00E7\u00F5es Gerais" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-slate-400", children: "Governan\u00E7a, hist\u00F3rico e mitiga\u00E7\u00E3o" })] }), (0, jsx_runtime_1.jsx)("span", { className: "text-[11px] px-2 py-1 rounded-full bg-emerald-500/15 text-emerald-200 border border-emerald-400/30", children: "Ativo" })] }), (0, jsx_runtime_1.jsxs)("section", { className: "rounded-xl border border-white/5 bg-white/5 p-3 space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-xs font-semibold text-slate-200", children: "Sess\u00F5es & Contexto" }), (0, jsx_runtime_1.jsx)("button", { className: "text-[11px] px-2 py-1 rounded-full bg-white/5 border border-white/10 text-slate-200", children: "Exportar" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [sessions.length === 0 && !sessionsLoading && ((0, jsx_runtime_1.jsx)("p", { className: "text-[11px] text-slate-400", children: "Nenhuma sess\u00E3o ainda. Interaja para criar hist\u00F3rico." })), sessionsLoading && ((0, jsx_runtime_1.jsx)("p", { className: "text-[11px] text-slate-300", children: "Carregando sess\u00F5es..." })), sessions.map((s) => ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between rounded-lg border border-white/10 bg-black/20 px-3 py-2", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("p", { className: "text-sm text-slate-50 font-semibold", children: s.title }), (0, jsx_runtime_1.jsxs)("p", { className: "text-[11px] text-slate-400", children: [s.tag, " \u2022 ", s.recency] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)("span", { className: `text-[11px] px-2 py-0.5 rounded-full border ${riskBadge(s.risk)}`, children: s.risk === "alto" ? "Alto" : s.risk === "medio" ? "MÃ©dio" : "Baixo" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => onResumeSession(s), className: "text-[11px] px-2 py-1 rounded-lg bg-emerald-500/15 text-emerald-100 border border-emerald-400/30", children: "Retomar" })] })] }, s.id)))] }), (0, jsx_runtime_1.jsx)("p", { className: "text-[11px] text-slate-400", children: "Conversas retomadas reidexar\u00E3o o contexto para o RAG. Segredos permanecem mascarados." })] }), (0, jsx_runtime_1.jsxs)("section", { className: "rounded-xl border border-white/5 bg-white/5 p-3 space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-xs font-semibold text-slate-200", children: "Opera\u00E7\u00E3o Segura" }), (0, jsx_runtime_1.jsx)("span", { className: "text-[11px] px-2 py-1 rounded-full bg-amber-500/15 text-amber-100 border border-amber-400/30", children: "Requerido" })] }), (0, jsx_runtime_1.jsx)(ToggleRow, { label: "Sandbox", helper: "Executar em ambiente isolado", checked: sandboxEnabled, onChange: onToggleSandbox }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between text-xs text-slate-300", children: [(0, jsx_runtime_1.jsx)("span", { children: "Modo sandbox" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2", children: [(0, jsx_runtime_1.jsx)("button", { onClick: () => onChangeSandboxMode("fail"), className: `px-3 py-1 rounded-lg border text-[11px] ${sandboxMode === "fail" ? "bg-rose-500/20 border-rose-400/40 text-rose-100" : "bg-white/5 border-white/10 text-slate-200"}`, children: "Fail (bloqueia)" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => onChangeSandboxMode("warn"), className: `px-3 py-1 rounded-lg border text-[11px] ${sandboxMode === "warn" ? "bg-amber-500/20 border-amber-400/40 text-amber-100" : "bg-white/5 border-white/10 text-slate-200"}`, children: "Warn" })] })] }), (0, jsx_runtime_1.jsx)(ToggleRow, { label: "Worker/Redis", helper: "Habilita orquestra\u00E7\u00E3o em fila", checked: workerEnabled, onChange: onToggleWorker }), (0, jsx_runtime_1.jsx)(ToggleRow, { label: "Safe mode", helper: "Bloqueia execu\u00E7\u00F5es destrutivas", checked: safeMode, onChange: onToggleSafeMode }), (0, jsx_runtime_1.jsx)(ToggleRow, { label: "Reviewer obrigat\u00F3rio", helper: "Valida patches antes do executor", checked: reviewGate, onChange: onToggleReviewGate }), (0, jsx_runtime_1.jsx)(ToggleRow, { label: "Mascaramento de segredos", helper: "ON recomendado em produ\u00E7\u00E3o", checked: maskingEnabled, onChange: onToggleMasking })] }), (0, jsx_runtime_1.jsxs)("section", { className: "rounded-xl border border-white/5 bg-white/5 p-3 space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-xs font-semibold text-slate-200", children: "Modelos & Custo" }), (0, jsx_runtime_1.jsx)("span", { className: "text-[11px] px-2 py-1 rounded-full bg-cyan-500/15 text-cyan-100 border border-cyan-400/30", children: "Controle" })] }), (0, jsx_runtime_1.jsx)(ToggleRow, { label: "Pesquisa profunda", helper: "Ativa modelo mais robusto", checked: deepSearch, onChange: onToggleDeep }), (0, jsx_runtime_1.jsx)(SliderRow, { label: "Temperature cap", value: temperatureCap, onChange: onChangeTemperatureCap, min: 0, max: 1, step: 0.05, display: `${(temperatureCap * 100).toFixed(0)}%` }), (0, jsx_runtime_1.jsx)(SliderRow, { label: "Limite tokens por resposta", value: tokenCap, onChange: onChangeTokenCap, min: 2000, max: 24000, step: 1000, display: `${tokenCap} tokens` }), (0, jsx_runtime_1.jsx)(SliderRow, { label: "Teto de custo di\u00E1rio", value: billingCap, onChange: onChangeBillingCap, min: 5, max: 100, step: 5, display: `USD ${billingCap}` }), (0, jsx_runtime_1.jsx)("p", { className: "text-[11px] text-slate-400", children: "Respostas de alto risco devem vir com cita\u00E7\u00F5es e diffs antes de execu\u00E7\u00E3o." })] }), (0, jsx_runtime_1.jsxs)("section", { className: "rounded-xl border border-white/5 bg-white/5 p-3 space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-xs font-semibold text-slate-200", children: "Mitiga\u00E7\u00E3o de Risco" }), (0, jsx_runtime_1.jsx)("span", { className: "text-[11px] px-2 py-1 rounded-full bg-emerald-500/15 text-emerald-100 border border-emerald-400/30", children: "Recomendado" })] }), (0, jsx_runtime_1.jsx)(Bullet, { text: "Exigir cita\u00E7\u00F5es de origem para sugest\u00F5es de c\u00F3digo" }), (0, jsx_runtime_1.jsx)(Bullet, { text: "Circuit-breaker: limite de passos e tempo por orquestra\u00E7\u00E3o" }), (0, jsx_runtime_1.jsx)(Bullet, { text: "Dry-run/sandbox antes de qualquer escrita ou deploy" }), (0, jsx_runtime_1.jsx)(Bullet, { text: "Bloquear mudan\u00E7as em pastas cr\u00EDticas sem aprova\u00E7\u00E3o" }), (0, jsx_runtime_1.jsx)(Bullet, { text: "Alertar confian\u00E7a baixa e pedir confirma\u00E7\u00E3o" })] }), (0, jsx_runtime_1.jsxs)("section", { className: "rounded-xl border border-white/5 bg-white/5 p-3 space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-xs font-semibold text-slate-200", children: "Dados & \u00CDndice" }), (0, jsx_runtime_1.jsx)("span", { className: `text-[11px] px-2 py-1 rounded-full border ${ragReady ? "bg-emerald-500/15 text-emerald-100 border-emerald-400/30" : "bg-amber-500/15 text-amber-100 border-amber-400/30"}`, children: ragReady ? "Indexado" : "Pendente" })] }), (0, jsx_runtime_1.jsx)("p", { className: "text-[11px] text-slate-300", children: "RAG precisa estar indexado para respostas com contexto de reposit\u00F3rio. Evita alucina\u00E7\u00F5es." }), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2", children: [(0, jsx_runtime_1.jsx)("button", { className: "flex-1 px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-sm text-slate-200", children: "Reindexar" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => onToggleRagReady(!ragReady), className: "px-3 py-2 rounded-lg bg-emerald-500/20 text-emerald-100 border border-emerald-400/40 text-sm", children: "Marcar pronto" })] }), (0, jsx_runtime_1.jsx)("p", { className: "text-[11px] text-slate-400", children: "Fontes externas (Confluence, Jira, GitHub PRs) ficam off at\u00E9 habilitar." })] }), (0, jsx_runtime_1.jsxs)("section", { className: "rounded-xl border border-white/5 bg-white/5 p-3 space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-xs font-semibold text-slate-200", children: "Login, API & Auditoria" }), (0, jsx_runtime_1.jsx)("span", { className: "text-[11px] px-2 py-1 rounded-full bg-white/5 border border-white/10 text-slate-200", children: "Futuro" })] }), (0, jsx_runtime_1.jsx)(ToggleRow, { label: "SSO/MFA", helper: "Requerido para produ\u00E7\u00E3o", checked: false, onChange: () => { }, disabled: true }), (0, jsx_runtime_1.jsx)(ToggleRow, { label: "API p\u00FAblica", helper: "Chaves rotacion\u00E1veis", checked: apiEnabled, onChange: onToggleApi }), (0, jsx_runtime_1.jsx)(ToggleRow, { label: "Webhooks", helper: "Eventos de orquestra\u00E7\u00E3o", checked: false, onChange: () => { }, disabled: true }), (0, jsx_runtime_1.jsx)("p", { className: "text-[11px] text-slate-400", children: "Auditoria: logs com segredos mascarados e reten\u00E7\u00E3o configur\u00E1vel." })] })] }));
}
function ToggleRow({ label, helper, checked, onChange, disabled }) {
    return ((0, jsx_runtime_1.jsxs)("div", { className: `flex items-center justify-between rounded-lg px-3 py-2 border ${disabled ? "border-white/5 bg-white/5 opacity-60" : "border-white/10 bg-black/10"}`, children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("p", { className: "text-sm text-slate-100 font-semibold", children: label }), helper && (0, jsx_runtime_1.jsx)("p", { className: "text-[11px] text-slate-400", children: helper })] }), (0, jsx_runtime_1.jsxs)("label", { className: "inline-flex items-center gap-2 cursor-pointer", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", className: "h-4 w-4 accent-emerald-500", checked: checked, disabled: disabled, onChange: (e) => onChange(e.target.checked) }), (0, jsx_runtime_1.jsx)("span", { className: "text-[11px] text-slate-200", children: checked ? "On" : "Off" })] })] }));
}
function SliderRow({ label, value, onChange, min, max, step, display }) {
    return ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-1", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between text-xs text-slate-200", children: [(0, jsx_runtime_1.jsx)("span", { className: "font-semibold", children: label }), (0, jsx_runtime_1.jsx)("span", { className: "text-[11px] text-slate-300", children: display })] }), (0, jsx_runtime_1.jsx)("input", { type: "range", min: min, max: max, step: step, value: value, onChange: (e) => onChange(Number(e.target.value)), className: "w-full accent-emerald-500" })] }));
}
function Bullet({ text }) {
    return (0, jsx_runtime_1.jsxs)("p", { className: "text-[11px] text-slate-300", children: ["\u2022 ", text] });
}
