# ============================================
# LegacyGuard - Configuração de Ambiente
# ============================================
# Copie este arquivo para .env.local e preencha os valores

# ============ OBRIGATÓRIOS EM PRODUÇÃO ============

# OpenAI
OPENAI_API_KEY=sk-...
OPENAI_CHEAP_MODEL=gpt-4o-mini
OPENAI_DEEP_MODEL=gpt-4o
MAX_TOKENS_PER_REQUEST=50000

# Redis (fila de tarefas e streams)
# Use REDIS_TLS_URL para conexões seguras (recomendado em produção)
REDIS_URL=redis://:password@your-redis-host:6379
REDIS_TLS_URL=rediss://:password@your-redis-host:6379

# NextAuth / OAuth
NEXTAUTH_SECRET=gere-uma-chave-secreta-com-openssl-rand-base64-32
NEXTAUTH_URL=https://seu-dominio.com
GITHUB_ID=seu-github-client-id
GITHUB_SECRET=seu-github-client-secret

# ============ BANCO DE DADOS ============

# MongoDB Atlas (opcional - para armazenamento de dados)
MONGODB_URI=

# PostgreSQL para audit logs e quotas (recomendado em produção)
# Se não configurado, usa armazenamento em memória (dados perdidos no restart)
AUDIT_DB_URL=postgresql://user:pass@host:5432/legacyguard?sslmode=require

# PostgreSQL com pgvector para RAG/embeddings (opcional)
# Pode ser o mesmo que AUDIT_DB_URL se suportar pgvector
PGVECTOR_URL=postgresql://user:pass@host:5432/legacyguard?sslmode=require

# Endpoint Neon Auth (ex.: apps Vite ou workers externos)
VITE_NEON_AUTH_URL=

# Chave para assinar logs de auditoria
AUDIT_SIGNING_KEY=legacyguard-dev-key

# ============ SANDBOX (Execução Segura) ============

# Habilitar execução de código em sandbox Docker
LEGACYGUARD_SANDBOX_ENABLED=true

# Caminho do repositório para análise (ambos são suportados pelo código)
LEGACYGUARD_REPO_PATH=/app/repo
LEGACYGUARD_SANDBOX_REPO_PATH=/workspace/legacyguard

# Comando runner padrão
LEGACYGUARD_SANDBOX_COMMAND=npm test
LEGACYGUARD_SANDBOX_RUNNER=/app/scripts/runner_sandbox.sh
LEGACYGUARD_SANDBOX_TIMEOUT_MS=900000
LEGACYGUARD_SANDBOX_FAIL_MODE=fail
LEGACYGUARD_FORCE_DOCKER=false

# ============ QUOTAS E LIMITES ============
QUOTA_CIRCUIT_THRESHOLD_USD=1000
QUOTA_CIRCUIT_PAUSE_MS=600000

# ============ MODO DESENVOLVIMENTO ============
NODE_ENV=production
# LEGACYGUARD_PLANNER_MODE=mock
# LEGACYGUARD_REVIEWER_MODE=mock

# Notas: não commit secrets reais. Use envs gerenciadas (Render, Vercel, CI).
