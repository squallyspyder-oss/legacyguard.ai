# ============================================
# LegacyGuard - ConfiguraÃ§Ã£o de Ambiente
# ============================================
# Copie este arquivo para .env.local e preencha os valores
# Para produÃ§Ã£o (Render/Vercel), configure como Environment Variables

# ============ OBRIGATÃ“RIOS ============

# OpenAI - Obtenha em https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-...
OPENAI_CHEAP_MODEL=gpt-4o-mini
OPENAI_DEEP_MODEL=gpt-4o
MAX_TOKENS_PER_REQUEST=50000

# NextAuth / OAuth - Para autenticaÃ§Ã£o
# Gere o secret com: openssl rand -base64 32
NEXTAUTH_SECRET=
# URL da aplicaÃ§Ã£o (ex: http://localhost:3000 ou https://seu-app.onrender.com)
NEXTAUTH_URL=http://localhost:3000

# GitHub OAuth - Configure em https://github.com/settings/developers
GITHUB_ID=
GITHUB_SECRET=

# ============ BANCO DE DADOS ============
# 
# O LegacyGuard usa PostgreSQL para persistÃªncia.
# Se nÃ£o configurar, usa memÃ³ria (dados perdidos no restart).
#
# OPÃ‡Ã•ES RECOMENDADAS (todas gratuitas):
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ ğŸ˜ NEON (Recomendado) - https://neon.tech                       â”‚
# â”‚    - PostgreSQL serverless com pgvector incluÃ­do                â”‚
# â”‚    - Free tier: 500MB storage, 190h compute/mÃªs                 â”‚
# â”‚    - Formato: postgresql://user:pass@ep-xxx.region.aws.neon.tech/neondb?sslmode=require
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ ğŸŸ¢ SUPABASE - https://supabase.com                              â”‚
# â”‚    - PostgreSQL + Auth + Storage integrados                     â”‚
# â”‚    - Free tier: 500MB database, 1GB storage                     â”‚
# â”‚    - Formato: postgresql://postgres.[ref]:pass@aws-0-region.pooler.supabase.com:6543/postgres
# â”‚    - Habilite pgvector em: Database > Extensions > vector       â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# PostgreSQL para audit logs e quotas
# Usado por: src/lib/audit.ts, src/lib/quotas.ts
AUDIT_DB_URL=

# PostgreSQL com pgvector para RAG/embeddings (busca semÃ¢ntica)
# Usado por: src/lib/rag-indexer.ts, src/lib/indexer-pgvector.ts
# Pode ser a mesma URL que AUDIT_DB_URL se o banco suportar pgvector
PGVECTOR_URL=

# ============ REDIS (Opcional) ============
#
# Usado para filas de tarefas assÃ­ncronas e rate limiting.
# Se nÃ£o configurar, algumas features podem nÃ£o funcionar.
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ ğŸ”´ UPSTASH (Recomendado) - https://upstash.com                  â”‚
# â”‚    - Redis serverless                                           â”‚
# â”‚    - Free tier: 10K comandos/dia                                â”‚
# â”‚    - Formato: rediss://default:xxx@xxx.upstash.io:6379          â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ ğŸ”´ REDIS CLOUD - https://redis.com/try-free/                    â”‚
# â”‚    - Redis gerenciado                                           â”‚
# â”‚    - Free tier: 30MB                                            â”‚
# â”‚    - Formato: redis://default:xxx@xxx.redis.cloud:port          â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

REDIS_URL=
# Use REDIS_TLS_URL para conexÃµes seguras (produÃ§Ã£o)
REDIS_TLS_URL=

# ============ SEGURANÃ‡A ============

# Chave para assinar logs de auditoria (gere uma Ãºnica por ambiente)
AUDIT_SIGNING_KEY=legacyguard-dev-key

# ============ SANDBOX (ExecuÃ§Ã£o Segura) ============

# Habilitar execuÃ§Ã£o de cÃ³digo em sandbox Docker
LEGACYGUARD_SANDBOX_ENABLED=true
LEGACYGUARD_REPO_PATH=/app/repo
LEGACYGUARD_SANDBOX_REPO_PATH=/workspace/legacyguard
LEGACYGUARD_SANDBOX_COMMAND=npm test
LEGACYGUARD_SANDBOX_RUNNER=/app/scripts/runner_sandbox.sh
LEGACYGUARD_SANDBOX_TIMEOUT_MS=900000
LEGACYGUARD_SANDBOX_FAIL_MODE=fail
# CRÃTICO: NUNCA definir como false em produÃ§Ã£o - permite execuÃ§Ã£o sem isolamento
LEGACYGUARD_FORCE_DOCKER=true

# ============ QUOTAS E LIMITES ============

QUOTA_CIRCUIT_THRESHOLD_USD=1000
QUOTA_CIRCUIT_PAUSE_MS=600000

# ============ AMBIENTE ============

NODE_ENV=development

# Modo mock para desenvolvimento (nÃ£o usa OpenAI real)
# LEGACYGUARD_PLANNER_MODE=mock
# LEGACYGUARD_REVIEWER_MODE=mock

# ============================================
# RESUMO - O que configurar primeiro:
# ============================================
# 
# MÃNIMO PARA RODAR (desenvolvimento local):
#   1. OPENAI_API_KEY
#   2. NEXTAUTH_SECRET (gere com: openssl rand -base64 32)
#
# PARA PRODUÃ‡ÃƒO COMPLETA:
#   1. Todos acima +
#   2. GITHUB_ID e GITHUB_SECRET (OAuth)
#   3. AUDIT_DB_URL (Neon ou Supabase)
#   4. PGVECTOR_URL (mesmo banco ou outro com pgvector)
#   5. REDIS_URL (Upstash)
#   6. NEXTAUTH_URL (sua URL de produÃ§Ã£o)
#
# âš ï¸  NUNCA commit este arquivo com secrets reais!
#     Use variÃ¡veis de ambiente no Render/Vercel/CI.
